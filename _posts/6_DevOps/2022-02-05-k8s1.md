---
layout: "single"
title: "[Kubernetes] 1.ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œì´ ì•„ë‹ˆë‹¤."
categories: [DevOps]
tags: [k8s, Kubernetes]
permalink: /k8s/1
---

# ì¿ ë²„ë„¤í‹°ìŠ¤ë€ ë¬´ì—‡ì¸ê°€

`ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤/ë„ì»¤` ë„ì„œë¥¼ ì½ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

## ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œì´ ì•„ë‹ˆë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë‹¨ìˆœí•œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì‹œìŠ¤í…œì´ ì•„ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì˜ í•„ìš”ì„±ì„ ì—†ì• ì¤€ë‹¤.
ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì˜ ê¸°ìˆ ì ì¸ ì •ì˜ëŠ” Aâ†’Bâ†’C ì˜ ì •ì˜ëœ ì›Œí¬í”Œë¡œìš°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.
ë°˜ë©´ì—, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë…ë¦½ì ì´ê³  ì¡°í•© ê°€ëŠ¥í•œ ì œì–´ í”„ë¡œì„¸ìŠ¤ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” **CRI(Container Runtime Interface)**ë¥¼ í†µí•´ì„œ ëŒ€í™”í•œë‹¤.
ê·¸ë˜ì„œ, ëª¨ë“  ë„ì»¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ë“¤ì„ í’ˆì„ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

- docker : **one** container on **one** host
- docker-compose : **multi** container on **one** host
- orchestration : **multi** container on **multi** host

## ë¬¼ë¦¬ ì„œë²„ â†’ VM â†’ Container

![container_evolution.svg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/125615c4-e86c-4bcf-b5bf-f1034b78b522/container_evolution.svg)

ë¬¼ë¦¬ì„œë²„ì—ì„œ ìœ ì—°í•¨ê³¼ í™•ì¥ì„±ì„ ìœ„í•´ VMì´ ë„ì…ë˜ì—ˆë‹¤.

VMì€ ìš´ì˜ì²´ì œë¥¼ í¬í•¨í•œ ê²©ë¦¬ëœ í•˜ë‚˜ì˜ ë¨¸ì‹ ì´ë‹¤.

ì»¨í…Œì´ë„ˆëŠ” VMì˜ ê²©ë¦¬ ì†ì„±ì„ ì™„í™”í–ˆë‹¤.

ì»¨í…Œì´ë„ˆëŠ” Host ì¸í”„ë¼ì™€ ì¢…ì†ì„±ì„ ëŠì—ˆë‹¤. (ì´ì‹ì„±)

ì»¨í…Œì´ë„ˆëŠ” VMê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ìì²´ fs, cpu ì ìœ ìœ¨, ë©”ëª¨ë¦¬, í”„ë¡œì„¸ìŠ¤ ê³µê°„ì´ ìˆë‹¤.

ì»¨í…Œì´ë„ˆëŠ” VMê³¼ ë‹¬ë¦¬ OS ì»¤ë„ì„ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

## ğŸ’œì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.

ì»¨í…Œì´ë„ˆ ê¸°ìˆ ì„ ì œê³µí•˜ëŠ” í”Œë«í¼ ì¤‘ì—ëŠ” **ë„ì»¤**ğŸ³ê°€ ìˆë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì§€ì›í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ í˜•ì„ ì œí•œí•˜ì§€ ì•ŠëŠ”ë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ë°°í¬í•˜ì§€ ì•Šìœ¼ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•˜ì§€ ì•ŠëŠ”ë‹¤. 

- CI/CD ì›Œí¬í”Œë¡œìš°ëŠ” ë³„ë„ë¡œ êµ¬ì„±í•œë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì˜ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.

- ex. ë¯¸ë“¤ì›¨ì–´(ex. ë©”ì‹œì§€ ë²„ìŠ¤), ë°ì´í„° ì²˜ë¦¬ í”„ë ˆì„ì›Œí¬(ex. Spark), ë°ì´í„°ë² ì´ìŠ¤(ex. MySQL), ìºì‹œ ë˜ëŠ” í´ëŸ¬ìŠ¤í„° ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œ(ex. Ceph)

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¡œê¹…, ëª¨ë‹ˆí„°ë§, ê²½ë³´ ì†”ë£¨ì…˜ì„ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì„¤ì • ì–¸ì–´/ì‹œìŠ¤í…œ(ex.Jsonnet)ì„ ì œê³µí•˜ê±°ë‚˜ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” **í¬ê´„ì ì¸** ë¨¸ì‹  ì„¤ì •, ìœ ì§€ë³´ìˆ˜, ê´€ë¦¬, ìë™ ë³µêµ¬ ì‹œìŠ¤í…œì„ ì œê³µí•˜ê±°ë‚˜ ì±„íƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

-----

# ê·¸ë˜ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ë€ ë¬´ì—‡ì¸ê°€

# ğŸ’œì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•˜ê³  ê°€ë™ ì¤‘ì§€ ì‹œê°„ì´ ì—†ëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì»¨í…Œì´ë„ˆê°€ ë‹¤ìš´ë˜ë©´ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•œë‹¤. ì´ ë¬¸ì œë¥¼ ì‹œìŠ¤í…œì— ì˜í•´ ì²˜ë¦¬í•œë‹¤ë©´ ë” ì‰½ì§€ ì•Šì„ê¹Œ?

ì»¨í…Œì´ë„ˆí™”ëœ ì›Œí¬ë¡œë“œì™€ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ **ì‚¬ìš©í•˜ê¸° ì‰½ê³ , ê°•ë ¥í•˜ê³ , ê²¬ê³ í•˜ê³ , í™•ì¥ ê°€ëŠ¥í•˜ë©°, íšŒë³µë ¥**ì„ ê°–ì¶˜ ì˜¤í”ˆì†ŒìŠ¤ í”Œë«í¼ì´ë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¨í…Œì´ë„ˆì—ì„œ êµ¬ë™ë  ìˆ˜ ìˆë‹¤ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œë„ ì˜ ë™ì‘í•  ê²ƒì´ë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì„ íƒ„ë ¥ì ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•œ í”„ë ˆì„ ì›Œí¬ë¥¼ ì œê³µí•œë‹¤. 

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í™•ì¥ê³¼ ì¥ì•  ì¡°ì¹˜ë¥¼ ì²˜ë¦¬í•˜ê³ , ë°°í¬ íŒ¨í„´ ë“±ì„ ì œê³µí•œë‹¤.

>ì°¸ê³ ë¡œ, k8s ëŠ” â€œkâ€ë¡œ ì‹œì‘í•˜ê³  â€œsâ€ë¡œ ëë‚˜ë©° ê·¸ ì‚¬ì´ì— â€œ8â€ê¸€ìë¥¼ ë‚˜íƒ€ë‚´ëŠ” kubernetesì˜ ì•½ì–´ì´ë‹¤.

## ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ëŠ¥

- ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±
: ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” DNS ì´ë¦„ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ìì²´ IP ì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ë…¸ì¶œí•  ìˆ˜ ìˆë‹¤. ì»¨í…Œì´ë„ˆì— ëŒ€í•œ íŠ¸ë˜í”½ì´ ë§ìœ¼ë©´, ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ë¡œë“œë°¸ëŸ°ì‹±í•˜ê³  ë°°í¬í•œë‹¤.
- ìŠ¤í† ë¦¬ì§€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
: ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œì»¬ ì €ì¥ì†Œ, ê³µìš© í´ë¼ìš°ë“œ ê³µê¸‰ì ë“±ê³¼ ê°™ì´ ì›í•˜ëŠ” ì €ì¥ì†Œ ì‹œìŠ¤í…œì„ ìë™ìœ¼ë¡œ íƒ‘ì¬ í•  ìˆ˜ ìˆë‹¤.
- ìë™í™”ëœ ë¡¤ì•„ì›ƒê³¼ ë¡¤ë°±
: ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ìë™í™”í•´ì„œ ë°°í¬ìš© ìƒˆ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ê³ , ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ì œê±°í•˜ê³ , ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ìƒˆ ì»¨í…Œì´ë„ˆì— ì ìš©í•  ìˆ˜ ìˆë‹¤.
- ìë™í™”ëœ ë¹ˆ íŒ¨í‚¹(bin packing)
: ê° ì»¨í…Œì´ë„ˆê°€ í•„ìš”ë¡œ í•˜ëŠ” CPUì™€ ë©”ëª¨ë¦¬(RAM)ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ê²Œ ì§€ì‹œí•˜ë©´, ì•Œë§ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë…¸ë“œë¥¼ ì œê³µí•œë‹¤.
- ìë™í™”ëœ ë³µêµ¬(self-healing)
: ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì‹¤íŒ¨í•œ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ê³ , ì»¨í…Œì´ë„ˆë¥¼ êµì²´í•˜ë©°, 'ì‚¬ìš©ì ì •ì˜ ìƒíƒœ ê²€ì‚¬'ì— ì‘ë‹µí•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì£½ì´ê³ , ì„œë¹„ìŠ¤ ì¤€ë¹„ê°€ ëë‚  ë•Œê¹Œì§€ ê·¸ëŸ¬í•œ ê³¼ì •ì„ í´ë¼ì´ì–¸íŠ¸ì— ë³´ì—¬ì£¼ì§€ ì•ŠëŠ”ë‹¤.
- ì‹œí¬ë¦¿ê³¼ êµ¬ì„± ê´€ë¦¬
: ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì•”í˜¸, OAuth í† í° ë° SSH í‚¤ì™€ ê°™ì€ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬ í•  ìˆ˜ ìˆë‹¤.

-----

> Reference
- ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤/ë„ì»¤ ([https://github.com/sysnet4admin/_Book_k8sInfra](https://github.com/sysnet4admin/_Book_k8sInfra))
- Kubernetes Docs ([https://kubernetes.io/ko/docs](https://kubernetes.io/ko/docs/home/))
