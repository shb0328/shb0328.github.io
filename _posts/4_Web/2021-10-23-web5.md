---
layout: "single"
title: "ìŠ¤í”„ë§ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ 5 - Spring Web Layer"
categories: [Web]
tags: [Java, SpringBoot, Spring Web Layer]
permalink: /web/5
---

# 3ì¥ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ JPAë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë¤„ë³´ì

ğŸ‘‰**APIë¥¼ ë§Œë“¤ ë•Œ í•„ìš”í•œ 3ê°œì˜ í´ë˜ìŠ¤**

- Request ë°ì´í„°ë¥¼ ë°›ì„ **Dto**
- API ìš”ì²­ì„ ë°›ì„ **Controller**
- íŠ¸ëœì­ì…˜, ë„ë©”ì¸ ê¸°ëŠ¥ ê°„ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ëŠ” **Service**

<span style='color:red'>**Service**ì˜ ì—­í• ì€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. **Service**ëŠ” íŠ¸ëœì­ì…˜, ë„ë©”ì¸ ê°„ ìˆœì„œ ë³´ì¥ì˜ ì—­í• ë§Œ í•œë‹¤. ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ **Domain Model**ì´ë‹¤.<span>

## ğŸ’œSpring ì›¹ ê³„ì¸µ

### Web Layer
- ì™¸ë¶€ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì „ë°˜ì ì¸ ì˜ì—­
- `@Controller`, `@RestController`, `@Filter`... ì˜ì—­
- Controllers
- View templates 
- Exception handlers
- Filter
- Controller Advice
- Interceptor

### Service Layer
- Controllerì™€ Dao(Repository)ì˜ ì¤‘ê°„ ì˜ì—­
- `@Service`, `@Transactional`... ì˜ì—­
- Application services
- Infrastructure services
- Transactional services

### Repository Layer
- ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°™ì€ ë°ì´í„° ì €ì¥ì†Œì— ì ‘ê·¼í•˜ëŠ” ì˜ì—­
- Dao(Data Access Object) ì˜ì—­
- Repository interfaces
- Their implementations

### Dtos
- ë°ì´í„°ë² ì´ìŠ¤ ë ˆì½”ë“œì˜ ë°ì´í„°ë¥¼ ë§¤í•‘í•˜ê¸° ìœ„í•œ ë°ì´í„° ê°ì²´(DTO)ì˜ ì˜ì—­
- DTO, Data Transfer Objects
  - ë·° í…œí”Œë¦¿ ì—”ì§„ì—ì„œ ì‚¬ìš©ë  ê°ì²´
  - Repository Layerì—ì„œ ê²°ê³¼ë¡œ ë„˜ê²¨ì¤€ ê°ì²´

### Domain Model
- ë„ë©”ì¸ì´ë¼ ë¶ˆë¦¬ëŠ” ê°œë°œ ëŒ€ìƒì„ ëª¨ë“  ì‚¬ëŒì´ ë™ì¼í•œ ê´€ì ì—ì„œ ì´í•´í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ë‹¨ìˆœí™” ì‹œí‚¨ ê²ƒ
- `@Entity` ì˜ì—­
- Domain services
- Entities
- Value objects (VO)

## ğŸ’œTestRestTemplate

```java
import org.springframework.boot.test.web.client.TestRestTemplate;
```

```java
@Autowired
private TestRestTemplate restTemplate;

//when
ResponseEntity<Long> responseEntity = restTemplate.postForEntity(url, requestDto, Long.class);
```
## ğŸ’œìì˜í•œ ì´ìŠˆ ë ˆí¬íŠ¸

```java
@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
```
Test í´ë˜ìŠ¤ì— ìœ„ ì–´ë…¸í…Œì´ì…˜ì„ ì •ì˜í•˜ì§€ ì•Šì•˜ë”ë‹ˆ

```java
restTemplate.postForEntity(url, requestDto, Long.class);
```
ì—ì„œ

`restTemplate`ì— ëŒ€í•´ì„œ `nullPointerException` ë°œìƒí•¨


<br>

>Reference
- [ìŠ¤í”„ë§ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤](https://jojoldu.tistory.com/463)
- [JPA Reference](https://www.objectdb.com/api/java/jpa)
- [Spring Guide : Accessing data jpa](https://spring.io/guides/gs/accessing-data-jpa/)
- [Spring JPA Document : repositories.core-concepts](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts)